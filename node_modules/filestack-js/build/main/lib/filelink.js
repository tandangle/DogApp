"use strict";
/*
 * Copyright (c) 2018 by Filestack
 * Some rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var config_1 = require("./../config");
var transforms_schema_1 = require("./../schema/transforms.schema");
var validator_1 = require("./../schema/validator");
var utils_1 = require("./utils");
var filestack_error_1 = require("./../filestack_error");
var debug_1 = require("debug");
var debug = debug_1.default('fs:filelink');
var Align;
(function (Align) {
    Align["left"] = "left";
    Align["right"] = "right";
    Align["center"] = "center";
    Align["bottom"] = "bottom";
    Align["top"] = "top";
    Align["faces"] = "faces";
    Align["middle"] = "middle";
})(Align = exports.Align || (exports.Align = {}));
/**
 * Fit enum
 */
var FitOptions;
(function (FitOptions) {
    FitOptions["clip"] = "clip";
    FitOptions["crop"] = "crop";
    FitOptions["scale"] = "scale";
    FitOptions["max"] = "max";
})(FitOptions = exports.FitOptions || (exports.FitOptions = {}));
/**
 * Blur enum
 */
var BlurMode;
(function (BlurMode) {
    BlurMode["linear"] = "linear";
    BlurMode["gaussian"] = "gaussian";
})(BlurMode = exports.BlurMode || (exports.BlurMode = {}));
/**
 * Shapes enum
 */
var ShapeType;
(function (ShapeType) {
    ShapeType["oval"] = "oval";
    ShapeType["rect"] = "rect";
})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));
/**
 * Noise type enum
 */
var NoiseType;
(function (NoiseType) {
    NoiseType["none"] = "none";
    NoiseType["low"] = "low";
    NoiseType["medium"] = "medium";
    NoiseType["high"] = "high";
})(NoiseType = exports.NoiseType || (exports.NoiseType = {}));
/**
 * Style type enum
 */
var StyleType;
(function (StyleType) {
    StyleType["artwork"] = "artwork";
    StyleType["photo"] = "photo";
})(StyleType = exports.StyleType || (exports.StyleType = {}));
/**
 * Color space enum
 */
var ColorspaceType;
(function (ColorspaceType) {
    ColorspaceType["RGB"] = "RGB";
    ColorspaceType["CMYK"] = "CMYK";
    ColorspaceType["Input"] = "Input";
})(ColorspaceType = exports.ColorspaceType || (exports.ColorspaceType = {}));
/**
 * Crop faces options enum
 */
var CropfacesType;
(function (CropfacesType) {
    CropfacesType["thumb"] = "thumb";
    CropfacesType["crop"] = "crop";
    CropfacesType["fill"] = "fill";
})(CropfacesType = exports.CropfacesType || (exports.CropfacesType = {}));
/**
 * Convert to format
 */
var VideoTypes;
(function (VideoTypes) {
    VideoTypes["h264"] = "h264";
    VideoTypes["h264_hi"] = "h264.hi";
    VideoTypes["webm"] = "webm";
    VideoTypes["webm-hi"] = "webm.hi";
    VideoTypes["ogg"] = "ogg";
    VideoTypes["ogg-hi"] = "ogg.hi";
    VideoTypes["hls-variant"] = "hls.variant";
    VideoTypes["mp3"] = "mp3";
    VideoTypes["oga"] = "oga";
    VideoTypes["m4a"] = "m4a";
    VideoTypes["aac"] = "aac";
    VideoTypes["hls"] = "hls.variant.audio";
})(VideoTypes = exports.VideoTypes || (exports.VideoTypes = {}));
var URLScreenshotAgent;
(function (URLScreenshotAgent) {
    URLScreenshotAgent["desktop"] = "desktop";
    URLScreenshotAgent["mobile"] = "mobile";
})(URLScreenshotAgent = exports.URLScreenshotAgent || (exports.URLScreenshotAgent = {}));
var URLScreenshotMode;
(function (URLScreenshotMode) {
    URLScreenshotMode["all"] = "all";
    URLScreenshotMode["window"] = "window";
})(URLScreenshotMode = exports.URLScreenshotMode || (exports.URLScreenshotMode = {}));
var URLScreenshotOrientation;
(function (URLScreenshotOrientation) {
    URLScreenshotOrientation["portrait"] = "portrait";
    URLScreenshotOrientation["landscape"] = "landscape";
})(URLScreenshotOrientation = exports.URLScreenshotOrientation || (exports.URLScreenshotOrientation = {}));
/**
 * Video storage location
 */
var Locations;
(function (Locations) {
    Locations["s3"] = "s3";
    Locations["azure"] = "azure";
    Locations["gcs"] = "gcs";
    Locations["rackspace"] = "rackspace";
    Locations["dropbox"] = "dropbox";
})(Locations = exports.Locations || (exports.Locations = {}));
var VideoAccess;
(function (VideoAccess) {
    VideoAccess["private"] = "private";
    VideoAccess["public"] = "public";
})(VideoAccess = exports.VideoAccess || (exports.VideoAccess = {}));
var VideoAccessMode;
(function (VideoAccessMode) {
    VideoAccessMode["preserve"] = "preserve";
    VideoAccessMode["constrain"] = "constrain";
    VideoAccessMode["letterbox"] = "letterbox";
    VideoAccessMode["pad"] = "pad";
    VideoAccessMode["crop"] = "crop";
})(VideoAccessMode = exports.VideoAccessMode || (exports.VideoAccessMode = {}));
var EnhancePreset;
(function (EnhancePreset) {
    EnhancePreset["auto"] = "auto";
    EnhancePreset["vivid"] = "vivid";
    EnhancePreset["beautify"] = "beautify";
    EnhancePreset["beautifyPlus"] = "beautify_plus";
    EnhancePreset["fixDark"] = "fix_dark";
    EnhancePreset["fixNoise"] = "fix_noise";
    EnhancePreset["fixTint"] = "fix_tint";
    EnhancePreset["outdor"] = "outdoor";
    EnhancePreset["fireworks"] = "fireworks";
})(EnhancePreset = exports.EnhancePreset || (exports.EnhancePreset = {}));
var handleRegexp = /^[\w\-]{20}|wf:\/\/[\w\-\/]{106}$/;
/**
 * Class for handling filelinks. For now its supports all filestack transforms.
 * It outputs transform url or array of transforms
 * @example
 * const link = new Filelink('handle or externalUrl', 'apikey');
 * link.flip().flop().store();
 *
 * console.log(link.toString());
 * // enable base64 support
 * link.setBase64(true)
 *
 * console.log(link.toString());
 *
 * @export
 * @class Filelink
 */
var Filelink = /** @class */ (function () {
    /**
     * Class for generating tranformation urls
     * @param {(string | string[])} source - handle or multiple handles (i.e. for collage)
     * @param {string} [apikey] - your apikey - required for all external sources
     *
     * @memberof Filelink
     */
    function Filelink(source, apikey) {
        /**
         * Applied transforms array
         *
         * @private
         * @memberof Filelink
         */
        this.transforms = [];
        /**
         * Is base64 support is enabled
         *
         * @private
         * @type {boolean}
         * @memberof Filelink
         */
        this.b64 = false;
        /**
         * should use a validator to check params of every task
         * @private
         * @type {boolean}
         * @memberof Filelink
         */
        this.useValidator = true;
        /**
         * Converts array of objects to object
         *
         * @private
         * @example [{name: 'resize', params: {height: 125}}] => {resize: {height: 125}}
         * @param arr - any array
         */
        this.arrayToObject = function (array, nameKey, dataKey) {
            if (array === void 0) { array = []; }
            return array.reduce(function (obj, item) {
                obj[item[nameKey]] = item[dataKey];
                return obj;
            }, {});
        };
        this.apikey = apikey;
        this.setSource(source);
    }
    /**
     * Enable new base64 link support to avoid problems with special chars in link
     *
     * @param {boolean} flag
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setBase64 = function (flag) {
        this.b64 = flag;
        return this;
    };
    /**
     * Switch the useValidator flag
     *
     * @param {boolean} flag
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setUseValidator = function (flag) {
        this.useValidator = flag;
        return this;
    };
    /**
     * Set cname for transformation link
     *
     * @param {string} cname
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setCname = function (cname) {
        this.cname = cname;
        return this;
    };
    /**
     * Set custom domain. Used for test purpose. It will be removed when after client.transform
     *
     * @param {string} domain
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setCustomDomain = function (domain) {
        this.customDomain = domain;
        return this;
    };
    Filelink.prototype.setSource = function (source) {
        this.source = source;
        var isExternal = this.isSourceExternal();
        debug("Source " + source + " - isExternal? " + isExternal);
        if (isExternal && !this.apikey) {
            throw new filestack_error_1.FilestackError('External sources requires apikey to handle transforms');
        }
        if (!isExternal && typeof this.source === 'string' && (!handleRegexp.test(this.source) && this.source.indexOf('filestackcontent') === -1)) {
            throw new filestack_error_1.FilestackError('Invalid filestack source provided');
        }
    };
    /**
     * Returns JSONSchema form transformations params
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.getValidationSchema = function () {
        return transforms_schema_1.TransformSchema;
    };
    /**
     * Returns transformations in JSON format
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.getTransformations = function () {
        if (this.useValidator) {
            this.validateTasks(this.transforms);
        }
        return this.transforms;
    };
    /**
     * Returns transform url
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.toString = function () {
        var returnUrl = [];
        returnUrl.push(this.getCdnHost());
        if (this.useValidator) {
            this.validateTasks(this.transforms);
        }
        if (this.apikey) {
            returnUrl.push(this.apikey);
        }
        var transformsString = this.generateTransformString();
        var source = this.source;
        if (this.b64) {
            if (this.transforms.length > 0) {
                transformsString = "b64/" + utils_1.b64(JSON.stringify(this.transforms), true);
            }
            if (Array.isArray(source)) {
                source = this.arrayToString(source);
            }
            source = "b64://" + utils_1.b64(source, true);
        }
        else {
            if (Array.isArray(source)) {
                source = this.arrayToString(source);
            }
            else {
                source = this.escapeValue(source);
            }
        }
        if (transformsString.length) {
            returnUrl.push(transformsString);
        }
        returnUrl.push(source);
        return returnUrl.join('/');
    };
    /**
     * Add task and validate
     *
     * @param {string} name
     * @param {*} [params]
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.addTask = function (name, params) {
        debug_1.default("Add task  " + name + " with params %O", params);
        if (name !== 'cache' && typeof params === 'boolean') {
            if (!params) {
                return this;
            }
            else {
                params = undefined;
            }
        }
        else if (typeof params === 'object' && !Object.keys(params).length) {
            params = undefined;
        }
        this.transforms.push({ name: name, params: params });
        return this;
    };
    /**
     * Returns all tasks added for transformation
     *
     * @memberof Filelink
     */
    Filelink.prototype.getTasks = function () {
        return this.transforms;
    };
    /**
     * Cleanup transformations on filelink
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.reset = function () {
        this.transforms = [];
        return this;
    };
    /**
     * Transformations part
     */
    /**
     * Add autoimage transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#auto-image-conversion
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.autoImage = function () {
        return this.addTask('auto_image', true);
    };
    /**
     * Adds flip transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#flip
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.flip = function () {
        return this.addTask('flip', true);
    };
    /**
     * Adds flop transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#flop
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.flop = function () {
        return this.addTask('flop', true);
    };
    /**
     * Adds enhance transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#enhance
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.enhance = function (params) {
        return this.addTask('enhance', params || true);
    };
    /**
     * Add security to link
     *
     * @see https://www.filestack.com/docs/api/processing/#redeye
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.redeye = function () {
        return this.addTask('redeye', true);
    };
    /**
     * Add monochrome transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#monochrome
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.monochrome = function () {
        return this.addTask('monochrome', true);
    };
    /**
     * Add compress transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#compress
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.compress = function (params) {
        return this.addTask('compress', params || true);
    };
    /**
     * Adds negative transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#negative
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.negative = function () {
        return this.addTask('negative', true);
    };
    /**
     * Adds tags transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#tags
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.tags = function () {
        return this.addTask('tags', true);
    };
    /**
     * Adds sfw transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sfw
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sfw = function () {
        return this.addTask('sfw', true);
    };
    /**
     * Add animate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#animate-images-to-gif
     * @param params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.animate = function (params) {
        return this.addTask('animate', params);
    };
    /**
     * Adds store transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#store
     * @param {(StoreParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.store = function (params) {
        return this.addTask('store', params);
    };
    /**
     * Adds cache transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#cache
     * @param {(CacheParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.cache = function (params) {
        return this.addTask('cache', params);
    };
    /**
     * Adds resize transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#resize
     * @param {ResizeParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.resize = function (params) {
        return this.addTask('resize', params);
    };
    /**
     * Adds crop transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#crop
     * @param {CropParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.crop = function (params) {
        return this.addTask('crop', params);
    };
    /**
     * Adds rotate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#rotate
     * @param {RotateParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.rotate = function (params) {
        return this.addTask('rotate', params);
    };
    /**
     * Adds detect_faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#facial-detection
     * @param {(DetectFacesParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.detectFaces = function (params) {
        return this.addTask('detect_faces', params);
    };
    /**
     * Adds crop faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#crop-faces
     * @param {CropFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.cropFaces = function (params) {
        return this.addTask('crop_faces', params);
    };
    /**
     * Adds pixelate faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pixelate-faces
     * @param {PixelateFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.pixelateFaces = function (params) {
        return this.addTask('pixelate_faces', params);
    };
    /**
     * Adds blur faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blur-faces
     * @param {BlurFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blurFaces = function (params) {
        return this.addTask('blur_faces', params);
    };
    /**
     * Adds rounded corners transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#rounded-corners
     * @param {(RoundedCornersParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.roundedCorners = function (params) {
        return this.addTask('rounded_corners', params);
    };
    /**
     * Adds polaroid transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#polaroid
     * @param {(PolaroidParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.polaroid = function (params) {
        return this.addTask('polaroid', params);
    };
    /**
     * Adds vignette transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#vignette
     * @param {(VignetteParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.vignette = function (params) {
        return this.addTask('vignette', params);
    };
    /**
     * Adds torn edges transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#torn-edges
     * @param {(TornEdgesParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.tornEdges = function (params) {
        return this.addTask('torn_edges', params);
    };
    /**
     * Adds shadow transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#shadow
     * @param {(ShadowParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.shadow = function (params) {
        return this.addTask('shadow', params);
    };
    /**
     * Adds circle transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#circle
     * @param {(CircleParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.circle = function (params) {
        return this.addTask('circle', params);
    };
    /**
     * Adds border transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#border
     * @param {(BorderParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.border = function (params) {
        return this.addTask('border', params);
    };
    /**
     * Adds sharpen transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sharpen
     * @param {(SharpenParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sharpen = function (params) {
        return this.addTask('sharpen', params);
    };
    /**
     * Adds blur transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blur
     * @param {(BlurParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blur = function (params) {
        return this.addTask('blur', params);
    };
    /**
     * Adds blackwhite transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blackwhite
     * @param {(BlackwhiteParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blackwhite = function (params) {
        return this.addTask('blackwhite', params);
    };
    /**
     * Adds sepia transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sepia
     * @param {(SepiaParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sepia = function (params) {
        return this.addTask('sepia', params);
    };
    /**
     * Adds pixelate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pixelate
     * @param {(PixelateParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.pixelate = function (params) {
        return this.addTask('pixelate', params);
    };
    /**
     * Adds oilpaint transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#oil-paint
     * @param {(OilPaintParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.oilPaint = function (params) {
        return this.addTask('oil_paint', params);
    };
    /**
     * Adds modulate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#modulate
     * @param {(ModulateParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.modulate = function (params) {
        return this.addTask('modulate', params);
    };
    /**
     * Adds partial pixelate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#partial-pixelate
     * @param {PartialPixelateParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.partialPixelate = function (params) {
        return this.addTask('partial_pixelate', params);
    };
    /**
     * Adds partial blur transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#partial-blur
     * @param {PartialBlurParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.partialBlur = function (params) {
        return this.addTask('partial_blur', params);
    };
    /**
     * Adds collage transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#collage
     * @param {CollageParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.collage = function (params) {
        return this.addTask('collage', params);
    };
    /**
     * Adds upscale transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#upscale
     * @param {(UpscaleParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.upscale = function (params) {
        return this.addTask('upscale', params);
    };
    /**
     * Adds ascii transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#ascii
     * @param {(AsciiParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.ascii = function (params) {
        return this.addTask('ascii', params);
    };
    /**
     * Adds quality transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#quality
     * @param {QualityParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.quality = function (params) {
        return this.addTask('quality', params);
    };
    /**
     * Adds security transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#security
     * @param {SecurityParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.security = function (params) {
        return this.addTask('security', params);
    };
    /**
     * Adds output transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#output
     * @param {OutputParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.output = function (params) {
        return this.addTask('output', params);
    };
    /**
     * Adds video convert transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#video-convert
     * @param {VideoConvertParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.videoConvert = function (params) {
        return this.addTask('video_convert', params);
    };
    /**
     * Adds URLScreenshot transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#urlscreenshot
     * @param {(URLScreenshotParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.URLScreenshot = function (params) {
        return this.addTask('urlscreenshot', params);
    };
    /**
     * Adds pdfinfo transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pdfinfo
     * @param {(PdfInfoParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.PDFInfo = function (params) {
        return this.addTask('pdfinfo', params);
    };
    /**
     * Adds pdfconvert transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pdfconvert
     * @param {(PdfConvertParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.PDFConvert = function (params) {
        return this.addTask('pdfconvert', params);
    };
    /**
     * Adds fallback transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#fallback
     * @param {(FallbackParams)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.fallback = function (params) {
        return this.addTask('fallback', params);
    };
    /**
     * Add zip transformation which create a zip package on files
     * used on actual context
     *
     * @see https://www.filestack.com/docs/api/processing/#zip
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.zip = function () {
        return this.addTask('zip', true);
    };
    /**
     * Add task which minify a css file
     *
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.minifyCss = function (params) {
        return this.addTask('minify_css', params);
    };
    /**
     * Add task which minify a javascript file.
     * For better handling of 'targets' param, use with b64 flag enabled.
     *
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.minifyJs = function (params) {
        return this.addTask('minify_js', params);
    };
    /**
     * Checks if source is external
     *
     * @private
     * @returns {boolean}
     * @memberof Filelink
     */
    Filelink.prototype.isSourceExternal = function () {
        if (!this.source) {
            throw new filestack_error_1.FilestackError('Source not Set');
        }
        var toTest = Array.isArray(this.source) ? this.source : [this.source];
        for (var i in toTest) {
            /* istanbul ignore next */
            if (!toTest.hasOwnProperty(i)) {
                continue;
            }
            if (toTest[i].indexOf('src:') === 0 || (toTest[i].indexOf('http') === 0 && toTest[i].indexOf('filestackcontent') === -1)) {
                return true;
            }
        }
        return false;
    };
    /**
     * Validate every task against schema
     *
     * @private
     * @param {object[]} transformations - object which contain all transformations
     * @returns {void}
     * @memberof Filelink
     */
    Filelink.prototype.validateTasks = function (transformations) {
        var res = Filelink.validator(this.arrayToObject(transformations, 'name', 'params'));
        if (res.errors.length) {
            throw new filestack_error_1.FilestackError("Params validation error", res.errors, filestack_error_1.FilestackErrorType.VALIDATION);
        }
        return;
    };
    /**
     * Returns correct cdn url with cname support
     *
     * @private
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.getCdnHost = function () {
        var urls = Object.assign({}, config_1.config.urls);
        if (this.customDomain) {
            urls.cdnUrl = this.customDomain;
        }
        urls = utils_1.resolveHost(urls, this.cname);
        return urls.cdnUrl;
    };
    /**
     * Returns applied transformations as string
     *
     * @private
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.generateTransformString = function () {
        var _this = this;
        var transforms = [];
        this.transforms.forEach(function (el) {
            transforms.push(_this.optionToString(el.name, el.params));
        });
        return transforms.join('/');
    };
    /**
     * Flatten transformation option to string
     *
     * @private
     * @example {resize:{width: 100,height: 200}} => resize=width:100,height:200
     * @param key - option key
     * @param values - option params
     */
    Filelink.prototype.optionToString = function (key, values) {
        var _this = this;
        var optionsString = [];
        if (typeof values === 'undefined') {
            return key;
        }
        // if we just want to enable feature
        if (typeof values === 'boolean') {
            if (!values && key === 'cache') {
                return 'cache=false';
            }
            return key;
        }
        Object.keys(values).forEach(function (i) {
            if (Array.isArray(values[i])) {
                optionsString.push(i + ":" + _this.arrayToString(values[i]));
                return;
            }
            optionsString.push(i + ":" + _this.escapeValue(values[i]));
        });
        return key + "=" + optionsString.join(',');
    };
    /**
     * Escape params values
     *
     * @private
     * @param {string} value
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.escapeValue = function (value) {
        if (typeof value !== 'string') {
            return value;
        }
        if (value.indexOf('/') > -1 || value.indexOf(',') > -1) {
            return "\"" + value + "\"";
        }
        return value;
    };
    /**
     * Converts nested arrays to string
     *
     * @private
     * @example [1,2, [2,3]] => "[1,2, [2,3]]"
     * @param arr - any array
     */
    Filelink.prototype.arrayToString = function (arr) {
        var _this = this;
        var toReturn = arr.map(function (el) {
            if (Array.isArray(el)) {
                return _this.arrayToString(el);
            }
            return _this.escapeValue(el);
        });
        return "[" + toReturn + "]";
    };
    /**
     * Validator instance
     *
     * @private
     * @memberof Filelink
     */
    Filelink.validator = validator_1.getValidator(transforms_schema_1.TransformSchema);
    return Filelink;
}());
exports.Filelink = Filelink;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvZmlsZWxpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7QUFFSCxzQ0FBcUM7QUFDckMsbUVBQWdFO0FBQ2hFLG1EQUFxRDtBQUNyRCxpQ0FBMkM7QUFDM0Msd0RBQTBFO0FBQzFFLCtCQUEwQjtBQUUxQixJQUFNLEtBQUssR0FBRyxlQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7QUFFbkMsSUFBWSxLQVFYO0FBUkQsV0FBWSxLQUFLO0lBQ2Ysc0JBQWEsQ0FBQTtJQUNiLHdCQUFlLENBQUE7SUFDZiwwQkFBaUIsQ0FBQTtJQUNqQiwwQkFBaUIsQ0FBQTtJQUNqQixvQkFBVyxDQUFBO0lBQ1gsd0JBQWUsQ0FBQTtJQUNmLDBCQUFpQixDQUFBO0FBQ25CLENBQUMsRUFSVyxLQUFLLEdBQUwsYUFBSyxLQUFMLGFBQUssUUFRaEI7QUFPRDs7R0FFRztBQUNILElBQVksVUFLWDtBQUxELFdBQVksVUFBVTtJQUNwQiwyQkFBYSxDQUFBO0lBQ2IsMkJBQWEsQ0FBQTtJQUNiLDZCQUFlLENBQUE7SUFDZix5QkFBVyxDQUFBO0FBQ2IsQ0FBQyxFQUxXLFVBQVUsR0FBVixrQkFBVSxLQUFWLGtCQUFVLFFBS3JCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFFBR1g7QUFIRCxXQUFZLFFBQVE7SUFDbEIsNkJBQWlCLENBQUE7SUFDakIsaUNBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUhXLFFBQVEsR0FBUixnQkFBUSxLQUFSLGdCQUFRLFFBR25CO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFNBR1g7QUFIRCxXQUFZLFNBQVM7SUFDbkIsMEJBQWEsQ0FBQTtJQUNiLDBCQUFhLENBQUE7QUFDZixDQUFDLEVBSFcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFHcEI7QUFFRDs7R0FFRztBQUNILElBQVksU0FLWDtBQUxELFdBQVksU0FBUztJQUNuQiwwQkFBYSxDQUFBO0lBQ2Isd0JBQVcsQ0FBQTtJQUNY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QztRQUM5QixDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sTUFBSSxRQUFRLE1BQUcsQ0FBQztJQUN6QixDQUFDO0lBMytCRDs7Ozs7T0FLRztJQUNZLGtCQUFTLEdBQUcsd0JBQVksQ0FBQyxtQ0FBZSxDQUFDLENBQUM7SUFvL0IzRCxlQUFDO0NBMy9CRCxBQTIvQkMsSUFBQTtBQTMvQlksNEJBQVEiLCJmaWxlIjoibGliL2ZpbGVsaW5rLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOCBieSBGaWxlc3RhY2tcbiAqIFNvbWUgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLy4uL2NvbmZpZyc7XG5pbXBvcnQgeyBUcmFuc2Zvcm1TY2hlbWEgfSBmcm9tICcuLy4uL3NjaGVtYS90cmFuc2Zvcm1zLnNjaGVtYSc7XG5pbXBvcnQgeyBnZXRWYWxpZGF0b3IgfSBmcm9tICcuLy4uL3NjaGVtYS92YWxpZGF0b3InO1xuaW1wb3J0IHsgcmVzb2x2ZUhvc3QsIGI2NCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgRmlsZXN0YWNrRXJyb3IsIEZpbGVzdGFja0Vycm9yVHlwZSB9IGZyb20gJy4vLi4vZmlsZXN0YWNrX2Vycm9yJztcbmltcG9ydCBEZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5cbmNvbnN0IGRlYnVnID0gRGVidWcoJ2ZzOmZpbGVsaW5rJyk7XG5cbmV4cG9ydCBlbnVtIEFsaWduIHtcbiAgbGVmdCA9ICdsZWZ0JyxcbiAgcmlnaHQgPSAncmlnaHQnLFxuICBjZW50ZXIgPSAnY2VudGVyJyxcbiAgYm90dG9tID0gJ2JvdHRvbScsXG4gIHRvcCA9ICd0b3AnLFxuICBmYWNlcyA9ICdmYWNlcycsXG4gIG1pZGRsZSA9ICdtaWRkbGUnLFxufVxuXG4vKipcbiAqIEFsaWduXG4gKi9cbmV4cG9ydCB0eXBlIEFsaWduT3B0aW9ucyA9IEFsaWduIHwgW0FsaWduLnRvcCB8IEFsaWduLm1pZGRsZSB8IEFsaWduLmJvdHRvbSwgQWxpZ24ubGVmdCB8IEFsaWduLmNlbnRlciB8IEFsaWduLnJpZ2h0XTtcblxuLyoqXG4gKiBGaXQgZW51bVxuICovXG5leHBvcnQgZW51bSBGaXRPcHRpb25zIHtcbiAgY2xpcCA9ICdjbGlwJyxcbiAgY3JvcCA9ICdjcm9wJyxcbiAgc2NhbGUgPSAnc2NhbGUnLFxuICBtYXggPSAnbWF4Jyxcbn1cblxuLyoqXG4gKiBCbHVyIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gQmx1ck1vZGUge1xuICBsaW5lYXIgPSAnbGluZWFyJyxcbiAgZ2F1c3NpYW4gPSAnZ2F1c3NpYW4nLFxufVxuXG4vKipcbiAqIFNoYXBlcyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIFNoYXBlVHlwZSB7XG4gIG92YWwgPSAnb3ZhbCcsXG4gIHJlY3QgPSAncmVjdCcsXG59XG5cbi8qKlxuICogTm9pc2UgdHlwZSBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIE5vaXNlVHlwZSB7XG4gIG5vbmUgPSAnbm9uZScsXG4gIGxvdyA9ICdsb3cnLFxuICBtZWRpdW0gPSAnbWVkaXVtJyxcbiAgaGlnaCA9ICdoaWdoJyxcbn1cblxuLyoqXG4gKiBTdHlsZSB0eXBlIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gU3R5bGVUeXBlIHtcbiAgYXJ0d29yayA9ICdhcnR3b3JrJyxcbiAgcGhvdG8gPSAncGhvdG8nLFxufVxuXG4vKipcbiAqIENvbG9yIHNwYWNlIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gQ29sb3JzcGFjZVR5cGUge1xuICBSR0IgPSAnUkdCJyxcbiAgQ01ZSyA9ICdDTVlLJyxcbiAgSW5wdXQgPSAnSW5wdXQnLFxufVxuXG4vKipcbiAqIENyb3AgZmFjZXMgb3B0aW9ucyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIENyb3BmYWNlc1R5cGUge1xuICB0aHVtYiA9ICd0aHVtYicsXG4gIGNyb3AgPSAnY3JvcCcsXG4gIGZpbGwgPSAnZmlsbCcsXG59XG5cbi8qKlxuICogQ29udmVydCB0byBmb3JtYXRcbiAqL1xuZXhwb3J0IGVudW0gVmlkZW9UeXBlcyB7XG4gIGgyNjQgPSAnaDI2NCcsXG4gIGgyNjRfaGkgPSAnaDI2NC5oaScsXG4gIHdlYm0gPSAnd2VibScsXG4gICd3ZWJtLWhpJyA9ICd3ZWJtLmhpJyxcbiAgb2dnID0gJ29nZycsXG4gICdvZ2ctaGknID0gJ29nZy5oaScsXG4gICdobHMtdmFyaWFudCcgPSAnaGxzLnZhcmlhbnQnLFxuICBtcDMgPSAnbXAzJyxcbiAgb2dhID0gJ29nYScsXG4gIG00YSA9ICdtNGEnLFxuICBhYWMgPSAnYWFjJyxcbiAgaGxzID0gJ2hscy52YXJpYW50LmF1ZGlvJyxcbn1cblxuZXhwb3J0IGVudW0gVVJMU2NyZWVuc2hvdEFnZW50IHtcbiAgZGVza3RvcCA9ICdkZXNrdG9wJyxcbiAgbW9iaWxlID0gJ21vYmlsZScsXG59XG5cbmV4cG9ydCBlbnVtIFVSTFNjcmVlbnNob3RNb2RlIHtcbiAgYWxsID0gJ2FsbCcsXG4gIHdpbmRvdyA9ICd3aW5kb3cnLFxufVxuXG5leHBvcnQgZW51bSBVUkxTY3JlZW5zaG90T3JpZW50YXRpb24ge1xuICBwb3J0cmFpdCA9ICdwb3J0cmFpdCcsXG4gIGxhbmRzY2FwZSA9ICdsYW5kc2NhcGUnLFxufVxuXG4vKipcbiAqIFZpZGVvIHN0b3JhZ2UgbG9jYXRpb25cbiAqL1xuZXhwb3J0IGVudW0gTG9jYXRpb25zIHtcbiAgczMgPSAnczMnLFxuICBhenVyZSA9ICdhenVyZScsXG4gIGdjcyA9ICdnY3MnLFxuICByYWNrc3BhY2UgPSAncmFja3NwYWNlJyxcbiAgZHJvcGJveCA9ICdkcm9wYm94Jyxcbn1cblxuZXhwb3J0IGVudW0gVmlkZW9BY2Nlc3Mge1xuICBwcml2YXRlID0gJ3ByaXZhdGUnLFxuICBwdWJsaWMgPSAncHVibGljJyxcbn1cblxuZXhwb3J0IGVudW0gVmlkZW9BY2Nlc3NNb2RlIHtcbiAgcHJlc2VydmUgPSAncHJlc2VydmUnLFxuICBjb25zdHJhaW4gPSAnY29uc3RyYWluJyxcbiAgbGV0dGVyYm94ID0gJ2xldHRlcmJveCcsXG4gIHBhZCA9ICdwYWQnLFxuICBjcm9wID0gJ2Nyb3AnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlQmFzZVBhcmFtcyB7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xuICBwYXRoPzogc3RyaW5nO1xuICBjb250YWluZXI/OiBzdHJpbmc7XG4gIHJlZ2lvbj86IHN0cmluZztcbiAgYWNjZXNzPzogc3RyaW5nO1xuICBkaXNhYmxlU3RvcmFnZUtleT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQXZhaWxhYmxlIG9wdGlvbnMgZm9yIHN0b3JlIHRyYW5zZm9ybWF0aW9uc1xuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RvcmVQYXJhbXNcbiAqL1xuZXhwb3J0IHR5cGUgU3RvcmVQYXJhbXMgPSBTdG9yZUJhc2VQYXJhbXMgJiB7XG4gIGZpbGVuYW1lPzogc3RyaW5nO1xuICBiYXNlNjRkZWNvZGU/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25QYXJhbXMge1xuICBkZWxheT86IG51bWJlcjtcbiAgbG9vcD86IG51bWJlcjtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgZml0PzogRml0T3B0aW9ucztcbiAgYWxpZ24/OiBBbGlnbk9wdGlvbnM7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzaXplUGFyYW1zIHtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgZml0PzogRml0T3B0aW9ucztcbiAgYWxpZ24/OiBBbGlnbk9wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JvcFBhcmFtcyB7XG4gIGRpbTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm90YXRlUGFyYW1zIHtcbiAgZGVnOiBudW1iZXIgfCBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldGVjdEZhY2VzUGFyYW1zIHtcbiAgbWluc2l6ZT86IG51bWJlcjtcbiAgbWF4c2l6ZT86IG51bWJlcjtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGV4cG9ydD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JvcEZhY2VzUGFyYW1zIHtcbiAgbW9kZT86IENyb3BmYWNlc1R5cGU7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIGZhY2VzPzogbnVtYmVyIHwgc3RyaW5nO1xuICBidWZmZXI/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGl4ZWxhdGVGYWNlc1BhcmFtcyB7XG4gIGZhY2VzPzogbnVtYmVyIHwgc3RyaW5nO1xuICBtaW5zaXplPzogbnVtYmVyO1xuICBtYXhzaXplPzogbnVtYmVyO1xuICBidWZmZXI/OiBudW1iZXI7XG4gIGFtb3VudD86IG51bWJlcjtcbiAgYmx1cj86IG51bWJlcjtcbiAgdHlwZT86IFNoYXBlVHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCbHVyRmFjZXNQYXJhbXMge1xuICBmYWNlcz86IG51bWJlciB8IHN0cmluZztcbiAgbWluc2l6ZT86IG51bWJlcjtcbiAgbWF4c2l6ZT86IG51bWJlcjtcbiAgYnVmZmVyPzogbnVtYmVyO1xuICBhbW91bnQ/OiBudW1iZXI7XG4gIGJsdXI/OiBudW1iZXI7XG4gIHR5cGU/OiBTaGFwZVR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm91bmRlZENvcm5lcnNQYXJhbXMge1xuICByYWRpdXM/OiBudW1iZXI7XG4gIGJsdXI/OiBudW1iZXI7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlnbmV0dGVQYXJhbXMge1xuICBhbW91bnQ/OiBudW1iZXI7XG4gIGJsdXJtb2RlPzogQmx1ck1vZGU7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9sYXJvaWRQYXJhbXMge1xuICBjb2xvcj86IHN0cmluZztcbiAgcm90YXRlPzogbnVtYmVyO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvcm5FZGdlc1BhcmFtcyB7XG4gIHNwcmVhZD86IFtudW1iZXIsIG51bWJlcl07XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hhZG93UGFyYW1zIHtcbiAgYmx1cj86IG51bWJlcjtcbiAgb3BhY2l0eT86IG51bWJlcjtcbiAgdmVjdG9yPzogW251bWJlciwgbnVtYmVyXTtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2lyY2xlUGFyYW1zIHtcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb3JkZXJQYXJhbXMge1xuICB3aWR0aD86IG51bWJlcjtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcHJlc3NQYXJhbXMge1xuICBtZXRhZGF0YT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hhcnBlblBhcmFtcyB7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsdXJQYXJhbXMge1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCbGFja3doaXRlUGFyYW1zIHtcbiAgdGhyZXNob2xkOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VwaWFQYXJhbXMge1xuICB0b25lOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGl4ZWxhdGVQYXJhbXMge1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPaWxQYWludFBhcmFtcyB7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsYXRlUGFyYW1zIHtcbiAgYnJpZ2h0bmVzcz86IG51bWJlcjtcbiAgaHVlPzogbnVtYmVyO1xuICBzYXR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpYWxQaXhlbGF0ZVBhcmFtcyB7XG4gIGFtb3VudD86IG51bWJlcjtcbiAgYmx1cj86IG51bWJlcjtcbiAgdHlwZT86IFNoYXBlVHlwZTtcbiAgb2JqZWN0cz86IFtbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXV07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGlhbEJsdXJQYXJhbXMge1xuICBhbW91bnQ6IG51bWJlcjtcbiAgYmx1cj86IG51bWJlcjtcbiAgdHlwZT86IFNoYXBlVHlwZTtcbiAgb2JqZWN0cz86IFtbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXV07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sbGFnZVBhcmFtcyB7XG4gIG1hcmdpbj86IG51bWJlcjtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGZpdD86IEZpdE9wdGlvbnM7XG4gIGZpbGVzOiBbc3RyaW5nXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcHNjYWxlUGFyYW1zIHtcbiAgdXBzY2FsZT86IGJvb2xlYW47XG4gIG5vaXNlPzogTm9pc2VUeXBlO1xuICBzdHlsZT86IFN0eWxlVHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc2NpaVBhcmFtcyB7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIGZvcmVncm91bmQ/OiBzdHJpbmc7XG4gIGNvbG9yZWQ/OiBib29sZWFuO1xuICBzaXplPzogbnVtYmVyO1xuICByZXZlcnNlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWFsaXR5UGFyYW1zIHtcbiAgdmFsdWU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eVBhcmFtcyB7XG4gIHBvbGljeTogc3RyaW5nO1xuICBzaWduYXR1cmU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3V0cHV0UGFyYW1zIHtcbiAgZm9ybWF0OiBzdHJpbmc7XG4gIGNvbG9yc3BhY2U/OiBzdHJpbmc7XG4gIHN0cmlwPzogYm9vbGVhbjtcbiAgcXVhbGl0eT86IG51bWJlcjtcbiAgcGFnZT86IG51bWJlcjtcbiAgY29tcHJlc3M/OiBib29sZWFuO1xuICBkZW5zaXR5PzogbnVtYmVyO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBzZWN1cmU/OiBib29sZWFuO1xuICBkb2NpbmZvPzogYm9vbGVhbjtcbiAgcGFnZWZvcm1hdD86IHN0cmluZztcbiAgcGFnZW9yaWVudGF0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlUGFyYW1zIHtcbiAgY2FjaGU/OiBib29sZWFuO1xuICBleHBpcnk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb0NvbnZlcnRQYXJhbXMge1xuICBhc3BlY3RfbW9kZTogVmlkZW9BY2Nlc3NNb2RlO1xuICBwcmVzZXQ/OiBWaWRlb1R5cGVzO1xuICBmb3JjZT86IGJvb2xlYW47XG4gIHRpdGxlPzogc3RyaW5nO1xuICBleHRuYW1lPzogc3RyaW5nO1xuICBmaWxlbmFtZT86IHN0cmluZztcbiAgbG9jYXRpb24/OiBMb2NhdGlvbnM7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIGFjY2Vzcz86IFZpZGVvQWNjZXNzO1xuICBjb250YWluZXI/OiBzdHJpbmc7XG4gIGF1ZGlvX2JpdHJhdGU/OiBudW1iZXI7XG4gIHVwc2NhbGU6IGJvb2xlYW47XG4gIHZpZGVvX2JpdHJhdGU/OiBudW1iZXI7XG4gIGF1ZGlvX3NhbXBsZV9yYXRlPzogbnVtYmVyO1xuICBhdWRpb19jaGFubmVscz86IG51bWJlcjtcbiAgY2xpcF9sZW5ndGg/OiBzdHJpbmc7XG4gIGNsaXBfb2Zmc2V0Pzogc3RyaW5nO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICB0d29fcGFzcz86IGJvb2xlYW47XG4gIGZwcz86IG51bWJlcjtcbiAga2V5ZnJhbWVfaW50ZXJ2YWw/OiBudW1iZXI7XG4gIHdhdGVybWFya191cmw/OiBzdHJpbmc7XG4gIHdhdGVybWFya190b3A/OiBudW1iZXI7XG4gIHdhdGVybWFya19ib3R0b20/OiBudW1iZXI7XG4gIHdhdGVybWFya19yaWdodD86IG51bWJlcjtcbiAgd2F0ZXJtYXJrX2xlZnQ/OiBudW1iZXI7XG4gIHdhdGVybWFya193aWR0aD86IG51bWJlcjtcbiAgd2F0ZXJtYXJrX2hlaWdodD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVUkxTY3JlZW5zaG90UGFyYW1zIHtcbiAgYWdlbnQ/OiBVUkxTY3JlZW5zaG90QWdlbnQ7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIG1vZGU/OiBVUkxTY3JlZW5zaG90TW9kZTtcbiAgZGVsYXk/OiBudW1iZXI7XG4gIG9yaWVudGF0aW9uPzogVVJMU2NyZWVuc2hvdE9yaWVudGF0aW9uO1xuICBkZXZpY2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIEVuaGFuY2VQcmVzZXQge1xuICBhdXRvID0gJ2F1dG8nLFxuICB2aXZpZCA9ICd2aXZpZCcsXG4gIGJlYXV0aWZ5ID0gJ2JlYXV0aWZ5JyxcbiAgYmVhdXRpZnlQbHVzID0gJ2JlYXV0aWZ5X3BsdXMnLFxuICBmaXhEYXJrID0gJ2ZpeF9kYXJrJyxcbiAgZml4Tm9pc2UgPSAnZml4X25vaXNlJyxcbiAgZml4VGludCA9ICdmaXhfdGludCcsXG4gIG91dGRvciA9ICdvdXRkb29yJyxcbiAgZmlyZXdvcmtzID0gJ2ZpcmV3b3JrcycsXG59XG5leHBvcnQgaW50ZXJmYWNlIEVuaGFuY2VQYXJhbXMge1xuICBwcmVzZXQ/OiBFbmhhbmNlUHJlc2V0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBkZkluZm9QYXJhbXMge1xuICBjb2xvcmluZm8/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBkZkNvbnZlcnRQYXJhbXMge1xuICBwYWdlb3JpZW50YXRpb24/OiBzdHJpbmc7XG4gIHBhZ2Vmb3JtYXQ/OiBzdHJpbmc7XG4gIHBhZ2VzPzogKHN0cmluZyB8IG51bWJlcilbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYWxsYmFja1BhcmFtcyB7XG4gIGhhbmRsZTogc3RyaW5nO1xuICBjYWNoZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNaW5pZnlDc3NQYXJhbXMge1xuICBnemlwPzogYm9vbGVhbjtcbiAgbGV2ZWw/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWluaWZ5SnNQYXJhbXMge1xuICBnemlwPzogYm9vbGVhbjtcbiAgdXNlX2JhYmVsX3BvbHlmaWxsPzogYm9vbGVhbjtcbiAga2VlcF9mbl9uYW1lPzogYm9vbGVhbjtcbiAga2VlcF9jbGFzc19uYW1lPzogYm9vbGVhbjtcbiAgbWFuZ2xlPzogYm9vbGVhbjtcbiAgbWVyZ2VfdmFycz86IGJvb2xlYW47XG4gIHJlbW92ZV9jb25zb2xlPzogYm9vbGVhbjtcbiAgcmVtb3ZlX3VuZGVmaW5lZD86IGJvb2xlYW47XG4gIHRhcmdldHM/OiBudWxsIHwgc3RyaW5nO1xufVxuXG5jb25zdCBoYW5kbGVSZWdleHAgPSAvXltcXHdcXC1dezIwfXx3ZjpcXC9cXC9bXFx3XFwtXFwvXXsxMDZ9JC87XG5cbi8qKlxuICogQ2xhc3MgZm9yIGhhbmRsaW5nIGZpbGVsaW5rcy4gRm9yIG5vdyBpdHMgc3VwcG9ydHMgYWxsIGZpbGVzdGFjayB0cmFuc2Zvcm1zLlxuICogSXQgb3V0cHV0cyB0cmFuc2Zvcm0gdXJsIG9yIGFycmF5IG9mIHRyYW5zZm9ybXNcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBsaW5rID0gbmV3IEZpbGVsaW5rKCdoYW5kbGUgb3IgZXh0ZXJuYWxVcmwnLCAnYXBpa2V5Jyk7XG4gKiBsaW5rLmZsaXAoKS5mbG9wKCkuc3RvcmUoKTtcbiAqXG4gKiBjb25zb2xlLmxvZyhsaW5rLnRvU3RyaW5nKCkpO1xuICogLy8gZW5hYmxlIGJhc2U2NCBzdXBwb3J0XG4gKiBsaW5rLnNldEJhc2U2NCh0cnVlKVxuICpcbiAqIGNvbnNvbGUubG9nKGxpbmsudG9TdHJpbmcoKSk7XG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIEZpbGVsaW5rXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlbGluayB7XG4gIC8qKlxuICAgKiBWYWxpZGF0b3IgaW5zdGFuY2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyB2YWxpZGF0b3IgPSBnZXRWYWxpZGF0b3IoVHJhbnNmb3JtU2NoZW1hKTtcblxuICAvKipcbiAgICogQXBwbGllZCB0cmFuc2Zvcm1zIGFycmF5XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSB0cmFuc2Zvcm1zID0gW107XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBvciBtdWx0aXBsZSBoYW5kbGVzIGluIGFycmF5XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBzb3VyY2U6IHN0cmluZyB8IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBBcHBsaWNhdGlvbiBrZXlcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGFwaWtleTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJcyBiYXNlNjQgc3VwcG9ydCBpcyBlbmFibGVkXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHByaXZhdGUgYjY0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIHNob3VsZCB1c2UgYSB2YWxpZGF0b3IgdG8gY2hlY2sgcGFyYW1zIG9mIGV2ZXJ5IHRhc2tcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSB1c2VWYWxpZGF0b3I6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBDdXN0b20gQ05BTUVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGNuYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE92ZXJ3cml0ZSBkb21haW4gKHRlc3QgcHVycG9zZXMpXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBjdXN0b21Eb21haW46IHN0cmluZztcblxuICAvKipcbiAgICogQ2xhc3MgZm9yIGdlbmVyYXRpbmcgdHJhbmZvcm1hdGlvbiB1cmxzXG4gICAqIEBwYXJhbSB7KHN0cmluZyB8IHN0cmluZ1tdKX0gc291cmNlIC0gaGFuZGxlIG9yIG11bHRpcGxlIGhhbmRsZXMgKGkuZS4gZm9yIGNvbGxhZ2UpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbYXBpa2V5XSAtIHlvdXIgYXBpa2V5IC0gcmVxdWlyZWQgZm9yIGFsbCBleHRlcm5hbCBzb3VyY2VzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgY29uc3RydWN0b3Ioc291cmNlOiBzdHJpbmcgfCBzdHJpbmdbXSwgYXBpa2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5hcGlrZXkgPSBhcGlrZXk7XG4gICAgdGhpcy5zZXRTb3VyY2Uoc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgbmV3IGJhc2U2NCBsaW5rIHN1cHBvcnQgdG8gYXZvaWQgcHJvYmxlbXMgd2l0aCBzcGVjaWFsIGNoYXJzIGluIGxpbmtcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBmbGFnXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgc2V0QmFzZTY0KGZsYWc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmI2NCA9IGZsYWc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3dpdGNoIHRoZSB1c2VWYWxpZGF0b3IgZmxhZ1xuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWdcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzZXRVc2VWYWxpZGF0b3IoZmxhZzogYm9vbGVhbikge1xuICAgIHRoaXMudXNlVmFsaWRhdG9yID0gZmxhZztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY25hbWUgZm9yIHRyYW5zZm9ybWF0aW9uIGxpbmtcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNuYW1lXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgc2V0Q25hbWUoY25hbWU6IHN0cmluZykge1xuICAgIHRoaXMuY25hbWUgPSBjbmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY3VzdG9tIGRvbWFpbi4gVXNlZCBmb3IgdGVzdCBwdXJwb3NlLiBJdCB3aWxsIGJlIHJlbW92ZWQgd2hlbiBhZnRlciBjbGllbnQudHJhbnNmb3JtXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5cbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzZXRDdXN0b21Eb21haW4oZG9tYWluOiBzdHJpbmcpIHtcbiAgICB0aGlzLmN1c3RvbURvbWFpbiA9IGRvbWFpbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldFNvdXJjZShzb3VyY2U6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cbiAgICBjb25zdCBpc0V4dGVybmFsID0gdGhpcy5pc1NvdXJjZUV4dGVybmFsKCk7XG5cbiAgICBkZWJ1ZyhgU291cmNlICR7c291cmNlfSAtIGlzRXh0ZXJuYWw/ICR7aXNFeHRlcm5hbH1gKTtcblxuICAgIGlmIChpc0V4dGVybmFsICYmICF0aGlzLmFwaWtleSkge1xuICAgICAgdGhyb3cgbmV3IEZpbGVzdGFja0Vycm9yKCdFeHRlcm5hbCBzb3VyY2VzIHJlcXVpcmVzIGFwaWtleSB0byBoYW5kbGUgdHJhbnNmb3JtcycpO1xuICAgIH1cblxuICAgIGlmICghaXNFeHRlcm5hbCAmJiB0eXBlb2YgdGhpcy5zb3VyY2UgPT09ICdzdHJpbmcnICYmICghaGFuZGxlUmVnZXhwLnRlc3QodGhpcy5zb3VyY2UpICYmIHRoaXMuc291cmNlLmluZGV4T2YoJ2ZpbGVzdGFja2NvbnRlbnQnKSA9PT0gLTEpKSB7XG4gICAgICB0aHJvdyBuZXcgRmlsZXN0YWNrRXJyb3IoJ0ludmFsaWQgZmlsZXN0YWNrIHNvdXJjZSBwcm92aWRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIEpTT05TY2hlbWEgZm9ybSB0cmFuc2Zvcm1hdGlvbnMgcGFyYW1zXG4gICAqXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZ2V0VmFsaWRhdGlvblNjaGVtYSgpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtU2NoZW1hO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJhbnNmb3JtYXRpb25zIGluIEpTT04gZm9ybWF0XG4gICAqXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZ2V0VHJhbnNmb3JtYXRpb25zKCkge1xuICAgIGlmICh0aGlzLnVzZVZhbGlkYXRvcikge1xuICAgICAgdGhpcy52YWxpZGF0ZVRhc2tzKHRoaXMudHJhbnNmb3Jtcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2Zvcm0gdXJsXG4gICAqXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgY29uc3QgcmV0dXJuVXJsID0gW107XG4gICAgcmV0dXJuVXJsLnB1c2godGhpcy5nZXRDZG5Ib3N0KCkpO1xuXG4gICAgaWYgKHRoaXMudXNlVmFsaWRhdG9yKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlVGFza3ModGhpcy50cmFuc2Zvcm1zKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hcGlrZXkpIHtcbiAgICAgIHJldHVyblVybC5wdXNoKHRoaXMuYXBpa2V5KTtcbiAgICB9XG5cbiAgICBsZXQgdHJhbnNmb3Jtc1N0cmluZyA9IHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm1TdHJpbmcoKTtcblxuICAgIGxldCBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcblxuICAgIGlmICh0aGlzLmI2NCkge1xuICAgICAgaWYgKHRoaXMudHJhbnNmb3Jtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRyYW5zZm9ybXNTdHJpbmcgPSBgYjY0LyR7YjY0KEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNmb3JtcyksIHRydWUpfWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlID0gdGhpcy5hcnJheVRvU3RyaW5nKHNvdXJjZSk7XG4gICAgICB9XG5cbiAgICAgIHNvdXJjZSA9IGBiNjQ6Ly8ke2I2NChzb3VyY2UsIHRydWUpfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlID0gdGhpcy5hcnJheVRvU3RyaW5nKHNvdXJjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VyY2UgPSB0aGlzLmVzY2FwZVZhbHVlKHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRyYW5zZm9ybXNTdHJpbmcubGVuZ3RoKSB7XG4gICAgICByZXR1cm5VcmwucHVzaCh0cmFuc2Zvcm1zU3RyaW5nKTtcbiAgICB9XG5cbiAgICByZXR1cm5VcmwucHVzaChzb3VyY2UpO1xuICAgIHJldHVybiByZXR1cm5Vcmwuam9pbignLycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0YXNrIGFuZCB2YWxpZGF0ZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgYWRkVGFzayhuYW1lOiBzdHJpbmcsIHBhcmFtcz8pIHtcbiAgICBEZWJ1ZyhgQWRkIHRhc2sgICR7bmFtZX0gd2l0aCBwYXJhbXMgJU9gLCBwYXJhbXMpO1xuXG4gICAgaWYgKG5hbWUgIT09ICdjYWNoZScgJiYgdHlwZW9mIHBhcmFtcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnICYmICFPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCkge1xuICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMudHJhbnNmb3Jtcy5wdXNoKHsgbmFtZSwgcGFyYW1zIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRhc2tzIGFkZGVkIGZvciB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGdldFRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybXM7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCB0cmFuc2Zvcm1hdGlvbnMgb24gZmlsZWxpbmtcbiAgICpcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLnRyYW5zZm9ybXMgPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm1hdGlvbnMgcGFydFxuICAgKi9cblxuICAvKipcbiAgICogQWRkIGF1dG9pbWFnZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jYXV0by1pbWFnZS1jb252ZXJzaW9uXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBhdXRvSW1hZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYXV0b19pbWFnZScsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZmxpcCB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jZmxpcFxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZmxpcCgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdmbGlwJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBmbG9wIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNmbG9wXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBmbG9wKCkge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2Zsb3AnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGVuaGFuY2UgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2VuaGFuY2VcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGVuaGFuY2UocGFyYW1zPzogRW5oYW5jZVBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2VuaGFuY2UnLCBwYXJhbXMgfHwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHNlY3VyaXR5IHRvIGxpbmtcbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3JlZGV5ZVxuICAgKiBAcmV0dXJuc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHJlZGV5ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdyZWRleWUnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbW9ub2Nocm9tZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jbW9ub2Nocm9tZVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbW9ub2Nocm9tZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdtb25vY2hyb21lJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNvbXByZXNzIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNjb21wcmVzc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgY29tcHJlc3MocGFyYW1zPzogQ29tcHJlc3NQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdjb21wcmVzcycsIHBhcmFtcyB8fCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIG5lZ2F0aXZlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNuZWdhdGl2ZVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbmVnYXRpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnbmVnYXRpdmUnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRhZ3MgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3RhZ3NcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHRhZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygndGFncycsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgc2Z3IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzZndcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNmdygpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdzZncnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW5pbWF0ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jYW5pbWF0ZS1pbWFnZXMtdG8tZ2lmXG4gICAqIEBwYXJhbSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGFuaW1hdGUocGFyYW1zOiBBbmltYXRpb25QYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdhbmltYXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHN0b3JlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzdG9yZVxuICAgKiBAcGFyYW0geyhTdG9yZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHN0b3JlKHBhcmFtcz86IFN0b3JlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3N0b3JlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNhY2hlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNjYWNoZVxuICAgKiBAcGFyYW0geyhDYWNoZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNhY2hlKHBhcmFtczogQ2FjaGVQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnY2FjaGUnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcmVzaXplIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNyZXNpemVcbiAgICogQHBhcmFtIHtSZXNpemVQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcmVzaXplKHBhcmFtczogUmVzaXplUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncmVzaXplJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNyb3AgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2Nyb3BcbiAgICogQHBhcmFtIHtDcm9wUGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNyb3AocGFyYW1zOiBDcm9wUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnY3JvcCcsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyByb3RhdGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3JvdGF0ZVxuICAgKiBAcGFyYW0ge1JvdGF0ZVBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICByb3RhdGUocGFyYW1zOiBSb3RhdGVQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdyb3RhdGUnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZGV0ZWN0X2ZhY2VzIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNmYWNpYWwtZGV0ZWN0aW9uXG4gICAqIEBwYXJhbSB7KERldGVjdEZhY2VzUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZGV0ZWN0RmFjZXMocGFyYW1zPzogRGV0ZWN0RmFjZXNQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnZGV0ZWN0X2ZhY2VzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNyb3AgZmFjZXMgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2Nyb3AtZmFjZXNcbiAgICogQHBhcmFtIHtDcm9wRmFjZXNQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgY3JvcEZhY2VzKHBhcmFtczogQ3JvcEZhY2VzUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnY3JvcF9mYWNlcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwaXhlbGF0ZSBmYWNlcyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcGl4ZWxhdGUtZmFjZXNcbiAgICogQHBhcmFtIHtQaXhlbGF0ZUZhY2VzUGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHBpeGVsYXRlRmFjZXMocGFyYW1zOiBQaXhlbGF0ZUZhY2VzUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncGl4ZWxhdGVfZmFjZXMnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYmx1ciBmYWNlcyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jYmx1ci1mYWNlc1xuICAgKiBAcGFyYW0ge0JsdXJGYWNlc1BhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBibHVyRmFjZXMocGFyYW1zOiBCbHVyRmFjZXNQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdibHVyX2ZhY2VzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHJvdW5kZWQgY29ybmVycyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcm91bmRlZC1jb3JuZXJzXG4gICAqIEBwYXJhbSB7KFJvdW5kZWRDb3JuZXJzUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcm91bmRlZENvcm5lcnMocGFyYW1zPzogUm91bmRlZENvcm5lcnNQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncm91bmRlZF9jb3JuZXJzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBvbGFyb2lkIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNwb2xhcm9pZFxuICAgKiBAcGFyYW0geyhQb2xhcm9pZFBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHBvbGFyb2lkKHBhcmFtcz86IFBvbGFyb2lkUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3BvbGFyb2lkJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHZpZ25ldHRlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN2aWduZXR0ZVxuICAgKiBAcGFyYW0geyhWaWduZXR0ZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHZpZ25ldHRlKHBhcmFtcz86IFZpZ25ldHRlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3ZpZ25ldHRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRvcm4gZWRnZXMgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3Rvcm4tZWRnZXNcbiAgICogQHBhcmFtIHsoVG9ybkVkZ2VzUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgdG9ybkVkZ2VzKHBhcmFtcz86IFRvcm5FZGdlc1BhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd0b3JuX2VkZ2VzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNoYWRvdyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jc2hhZG93XG4gICAqIEBwYXJhbSB7KFNoYWRvd1BhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNoYWRvdyhwYXJhbXM/OiBTaGFkb3dQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnc2hhZG93JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNpcmNsZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jY2lyY2xlXG4gICAqIEBwYXJhbSB7KENpcmNsZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNpcmNsZShwYXJhbXM/OiBDaXJjbGVQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnY2lyY2xlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGJvcmRlciB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jYm9yZGVyXG4gICAqIEBwYXJhbSB7KEJvcmRlclBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGJvcmRlcihwYXJhbXM/OiBCb3JkZXJQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYm9yZGVyJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNoYXJwZW4gdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3NoYXJwZW5cbiAgICogQHBhcmFtIHsoU2hhcnBlblBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNoYXJwZW4ocGFyYW1zPzogU2hhcnBlblBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdzaGFycGVuJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGJsdXIgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2JsdXJcbiAgICogQHBhcmFtIHsoQmx1clBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGJsdXIocGFyYW1zPzogQmx1clBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdibHVyJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGJsYWNrd2hpdGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2JsYWNrd2hpdGVcbiAgICogQHBhcmFtIHsoQmxhY2t3aGl0ZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGJsYWNrd2hpdGUocGFyYW1zPzogQmxhY2t3aGl0ZVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdibGFja3doaXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNlcGlhIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzZXBpYVxuICAgKiBAcGFyYW0geyhTZXBpYVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNlcGlhKHBhcmFtcz86IFNlcGlhUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3NlcGlhJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBpeGVsYXRlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNwaXhlbGF0ZVxuICAgKiBAcGFyYW0geyhQaXhlbGF0ZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHBpeGVsYXRlKHBhcmFtcz86IFBpeGVsYXRlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3BpeGVsYXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIG9pbHBhaW50IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNvaWwtcGFpbnRcbiAgICogQHBhcmFtIHsoT2lsUGFpbnRQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBvaWxQYWludChwYXJhbXM/OiBPaWxQYWludFBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdvaWxfcGFpbnQnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgbW9kdWxhdGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI21vZHVsYXRlXG4gICAqIEBwYXJhbSB7KE1vZHVsYXRlUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbW9kdWxhdGUocGFyYW1zPzogTW9kdWxhdGVQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnbW9kdWxhdGUnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcGFydGlhbCBwaXhlbGF0ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcGFydGlhbC1waXhlbGF0ZVxuICAgKiBAcGFyYW0ge1BhcnRpYWxQaXhlbGF0ZVBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwYXJ0aWFsUGl4ZWxhdGUocGFyYW1zOiBQYXJ0aWFsUGl4ZWxhdGVQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwYXJ0aWFsX3BpeGVsYXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBhcnRpYWwgYmx1ciB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcGFydGlhbC1ibHVyXG4gICAqIEBwYXJhbSB7UGFydGlhbEJsdXJQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcGFydGlhbEJsdXIocGFyYW1zOiBQYXJ0aWFsQmx1clBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3BhcnRpYWxfYmx1cicsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjb2xsYWdlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNjb2xsYWdlXG4gICAqIEBwYXJhbSB7Q29sbGFnZVBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBjb2xsYWdlKHBhcmFtczogQ29sbGFnZVBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2NvbGxhZ2UnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdXBzY2FsZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jdXBzY2FsZVxuICAgKiBAcGFyYW0geyhVcHNjYWxlUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgdXBzY2FsZShwYXJhbXM/OiBVcHNjYWxlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3Vwc2NhbGUnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYXNjaWkgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2FzY2lpXG4gICAqIEBwYXJhbSB7KEFzY2lpUGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgYXNjaWkocGFyYW1zPzogQXNjaWlQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYXNjaWknLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcXVhbGl0eSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcXVhbGl0eVxuICAgKiBAcGFyYW0ge1F1YWxpdHlQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcXVhbGl0eShwYXJhbXM6IFF1YWxpdHlQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdxdWFsaXR5JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNlY3VyaXR5IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzZWN1cml0eVxuICAgKiBAcGFyYW0ge1NlY3VyaXR5UGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNlY3VyaXR5KHBhcmFtczogU2VjdXJpdHlQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdzZWN1cml0eScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvdXRwdXQgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI291dHB1dFxuICAgKiBAcGFyYW0ge091dHB1dFBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBvdXRwdXQocGFyYW1zOiBPdXRwdXRQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdvdXRwdXQnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdmlkZW8gY29udmVydCB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jdmlkZW8tY29udmVydFxuICAgKiBAcGFyYW0ge1ZpZGVvQ29udmVydFBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICB2aWRlb0NvbnZlcnQocGFyYW1zOiBWaWRlb0NvbnZlcnRQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd2aWRlb19jb252ZXJ0JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIFVSTFNjcmVlbnNob3QgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3VybHNjcmVlbnNob3RcbiAgICogQHBhcmFtIHsoVVJMU2NyZWVuc2hvdFBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIFVSTFNjcmVlbnNob3QocGFyYW1zPzogVVJMU2NyZWVuc2hvdFBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd1cmxzY3JlZW5zaG90JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBkZmluZm8gdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3BkZmluZm9cbiAgICogQHBhcmFtIHsoUGRmSW5mb1BhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIFBERkluZm8ocGFyYW1zPzogUGRmSW5mb1BhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwZGZpbmZvJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBkZmNvbnZlcnQgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3BkZmNvbnZlcnRcbiAgICogQHBhcmFtIHsoUGRmQ29udmVydFBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIFBERkNvbnZlcnQocGFyYW1zPzogUGRmQ29udmVydFBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwZGZjb252ZXJ0JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGZhbGxiYWNrIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNmYWxsYmFja1xuICAgKiBAcGFyYW0geyhGYWxsYmFja1BhcmFtcyl9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZmFsbGJhY2socGFyYW1zOiBGYWxsYmFja1BhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2ZhbGxiYWNrJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgemlwIHRyYW5zZm9ybWF0aW9uIHdoaWNoIGNyZWF0ZSBhIHppcCBwYWNrYWdlIG9uIGZpbGVzXG4gICAqIHVzZWQgb24gYWN0dWFsIGNvbnRleHRcbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3ppcFxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgemlwKCkge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3ppcCcsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0YXNrIHdoaWNoIG1pbmlmeSBhIGNzcyBmaWxlXG4gICAqXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBtaW5pZnlDc3MocGFyYW1zOiBNaW5pZnlDc3NQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdtaW5pZnlfY3NzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGFzayB3aGljaCBtaW5pZnkgYSBqYXZhc2NyaXB0IGZpbGUuXG4gICAqIEZvciBiZXR0ZXIgaGFuZGxpbmcgb2YgJ3RhcmdldHMnIHBhcmFtLCB1c2Ugd2l0aCBiNjQgZmxhZyBlbmFibGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbWluaWZ5SnMocGFyYW1zOiBNaW5pZnlKc1BhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ21pbmlmeV9qcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHNvdXJjZSBpcyBleHRlcm5hbFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGlzU291cmNlRXh0ZXJuYWwoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLnNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEZpbGVzdGFja0Vycm9yKCdTb3VyY2Ugbm90IFNldCcpO1xuICAgIH1cblxuICAgIGxldCB0b1Rlc3QgPSBBcnJheS5pc0FycmF5KHRoaXMuc291cmNlKSA/IHRoaXMuc291cmNlIDogW3RoaXMuc291cmNlXTtcbiAgICBmb3IgKGxldCBpIGluIHRvVGVzdCkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmICghdG9UZXN0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9UZXN0W2ldLmluZGV4T2YoJ3NyYzonKSA9PT0gMCB8fCAodG9UZXN0W2ldLmluZGV4T2YoJ2h0dHAnKSA9PT0gMCAmJiB0b1Rlc3RbaV0uaW5kZXhPZignZmlsZXN0YWNrY29udGVudCcpID09PSAtMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGV2ZXJ5IHRhc2sgYWdhaW5zdCBzY2hlbWFcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtvYmplY3RbXX0gdHJhbnNmb3JtYXRpb25zIC0gb2JqZWN0IHdoaWNoIGNvbnRhaW4gYWxsIHRyYW5zZm9ybWF0aW9uc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIHZhbGlkYXRlVGFza3ModHJhbnNmb3JtYXRpb25zOiBvYmplY3RbXSk6IHZvaWQge1xuICAgIGNvbnN0IHJlcyA9IEZpbGVsaW5rLnZhbGlkYXRvcih0aGlzLmFycmF5VG9PYmplY3QodHJhbnNmb3JtYXRpb25zLCAnbmFtZScsICdwYXJhbXMnKSk7XG4gICAgaWYgKHJlcy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRmlsZXN0YWNrRXJyb3IoYFBhcmFtcyB2YWxpZGF0aW9uIGVycm9yYCwgcmVzLmVycm9ycywgRmlsZXN0YWNrRXJyb3JUeXBlLlZBTElEQVRJT04pO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNvcnJlY3QgY2RuIHVybCB3aXRoIGNuYW1lIHN1cHBvcnRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGdldENkbkhvc3QoKTogc3RyaW5nIHtcbiAgICBsZXQgdXJscyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZy51cmxzKTtcblxuICAgIGlmICh0aGlzLmN1c3RvbURvbWFpbikge1xuICAgICAgdXJscy5jZG5VcmwgPSB0aGlzLmN1c3RvbURvbWFpbjtcbiAgICB9XG5cbiAgICB1cmxzID0gcmVzb2x2ZUhvc3QodXJscywgdGhpcy5jbmFtZSk7XG5cbiAgICByZXR1cm4gdXJscy5jZG5Vcmw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhcHBsaWVkIHRyYW5zZm9ybWF0aW9ucyBhcyBzdHJpbmdcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlVHJhbnNmb3JtU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IHRyYW5zZm9ybXMgPSBbXTtcblxuICAgIHRoaXMudHJhbnNmb3Jtcy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgdHJhbnNmb3Jtcy5wdXNoKHRoaXMub3B0aW9uVG9TdHJpbmcoZWwubmFtZSwgZWwucGFyYW1zKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJhbnNmb3Jtcy5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogRmxhdHRlbiB0cmFuc2Zvcm1hdGlvbiBvcHRpb24gdG8gc3RyaW5nXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBleGFtcGxlIHtyZXNpemU6e3dpZHRoOiAxMDAsaGVpZ2h0OiAyMDB9fSA9PiByZXNpemU9d2lkdGg6MTAwLGhlaWdodDoyMDBcbiAgICogQHBhcmFtIGtleSAtIG9wdGlvbiBrZXlcbiAgICogQHBhcmFtIHZhbHVlcyAtIG9wdGlvbiBwYXJhbXNcbiAgICovXG4gIHByaXZhdGUgb3B0aW9uVG9TdHJpbmcoa2V5OiBzdHJpbmcsIHZhbHVlczogYW55KTogc3RyaW5nIHtcbiAgICBsZXQgb3B0aW9uc1N0cmluZzogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuXG4gICAgLy8gaWYgd2UganVzdCB3YW50IHRvIGVuYWJsZSBmZWF0dXJlXG4gICAgaWYgKHR5cGVvZiB2YWx1ZXMgPT09ICdib29sZWFuJykge1xuICAgICAgaWYgKCF2YWx1ZXMgJiYga2V5ID09PSAnY2FjaGUnKSB7XG4gICAgICAgIHJldHVybiAnY2FjaGU9ZmFsc2UnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzKHZhbHVlcykuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzW2ldKSkge1xuICAgICAgICBvcHRpb25zU3RyaW5nLnB1c2goYCR7aX06JHt0aGlzLmFycmF5VG9TdHJpbmcodmFsdWVzW2ldKX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zU3RyaW5nLnB1c2goYCR7aX06JHt0aGlzLmVzY2FwZVZhbHVlKHZhbHVlc1tpXSl9YCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYCR7a2V5fT0ke29wdGlvbnNTdHJpbmcuam9pbignLCcpfWA7XG4gIH1cblxuICAvKipcbiAgICogRXNjYXBlIHBhcmFtcyB2YWx1ZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBlc2NhcGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5pbmRleE9mKCcvJykgPiAtMSB8fCB2YWx1ZS5pbmRleE9mKCcsJykgPiAtMSkge1xuICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBuZXN0ZWQgYXJyYXlzIHRvIHN0cmluZ1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAZXhhbXBsZSBbMSwyLCBbMiwzXV0gPT4gXCJbMSwyLCBbMiwzXV1cIlxuICAgKiBAcGFyYW0gYXJyIC0gYW55IGFycmF5XG4gICAqL1xuICBwcml2YXRlIGFycmF5VG9TdHJpbmcoYXJyOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9SZXR1cm4gPSBhcnIubWFwKChlbCkgPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWwpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5VG9TdHJpbmcoZWwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lc2NhcGVWYWx1ZShlbCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYFske3RvUmV0dXJufV1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFycmF5IG9mIG9iamVjdHMgdG8gb2JqZWN0XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBleGFtcGxlIFt7bmFtZTogJ3Jlc2l6ZScsIHBhcmFtczoge2hlaWdodDogMTI1fX1dID0+IHtyZXNpemU6IHtoZWlnaHQ6IDEyNX19XG4gICAqIEBwYXJhbSBhcnIgLSBhbnkgYXJyYXlcbiAgICovXG4gIHByaXZhdGUgYXJyYXlUb09iamVjdCA9IChhcnJheTogb2JqZWN0W10gPSBbXSwgbmFtZUtleTogc3RyaW5nLCBkYXRhS2V5OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChvYmosIGl0ZW0pID0+IHtcbiAgICAgIG9ialtpdGVtW25hbWVLZXldXSA9IGl0ZW1bZGF0YUtleV07XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcbiAgfVxufVxuIl19
